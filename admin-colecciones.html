<!DOCTYPE html>
<html lang="es">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colecciones - MetaMapa Admin</title>
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  </head>

  <body>
    <div class="admin-layout">
      <aside class="sidebar">
        <a href="index.html" class="logo">MetaMapa Admin</a>
        <nav class="sidebar__nav">
          <a href="admin-dashboard.html" class="sidebar__link">Dashboard</a>
          <a href="admin-colecciones.html" class="sidebar__link sidebar__link--active">Colecciones</a>
          <a href="admin-fuentes.html" class="sidebar__link">Fuentes</a>
          <a href="admin-revisiones.html" class="sidebar__link">Revisiones</a>
        </nav>
        <a href="auth.html" class="btn btn--secondary sidebar__logout">Cerrar Sesión</a>
      </aside>

      <main class="main-content">
        <h1 class="page-title">Gestión de Colecciones</h1>
        <div class="content-header">
          <button class="btn btn--primary">Crear Nueva Colección</button>
          <button class="btn btn--secondary" onclick="openCSVFilePicker()">Importar desde CSV</button>
        </div>

        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Algoritmo de consenso</th>
                <th>Fuentes Asociadas</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Rutas de la Revolución</td>
                <td>Mayoría simple</td>
                <td>Archivo Nacional</td>
                <td>
                  <button class="btn btn--small">Editar</button>
                  <button class="btn btn--small btn--danger">Eliminar</button>
                </td>
              </tr>
              <tr>
                <td>Eventos Naturales</td>
                <td>Absoluta</td>
                <td>Archivo Histórico</td>
                <td>
                  <button class="btn btn--small">Editar</button>
                  <button class="btn btn--small btn--danger">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>

    <script>
      function openCSVFilePicker() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.csv';

        input.onchange = function (event) {
          const file = event.target.files[0];
          if (file) {
            console.log('File selected:', file.name);
            console.log('File type:', file.type);

            // Optional: Add a more robust file type check
            if (!file.name.toLowerCase().endsWith('.csv')) {
              alert('Invalid file type. Please select a .csv file.');
              return; // Exit the function if the file type is wrong
            }

            // TODO: Implement the logic to read and upload the CSV file content.
            // Example: You could use a FileReader to read the file content.
            const reader = new FileReader();
            reader.onload = function (e) {
              const csvContent = e.target.result;
              console.log('CSV content:', csvContent);
              // You can now send this content to your backend.
            };
            reader.readAsText(file);
          }
        };

        input.click();
      }
    </script>
  </body>

</html>